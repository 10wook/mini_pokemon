<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.exam.mapper.CartMapper">

  <!-- Insert a new cart -->
    <insert id="insertCart" parameterType="com.exam.model.Cart">
        INSERT INTO cart (customer_id, product_id, product_amount, product_price, totalcost)
        VALUES (#{customerId}, #{productId}, #{productAmount}, #{productPrice}, #{totalCost})
    </insert>

    <!-- Update an existing cart -->
    <update id="updateCart" parameterType="com.exam.model.Cart">
        UPDATE cart
        SET product_amount = #{productAmount},
            product_price = #{productPrice},
            totalcost = #{totalCost}
        WHERE customer_id = #{customerId}
          AND product_id = #{productId}
    </update>

    <!-- Delete a cart by customerId -->
    <delete id="deleteCart" parameterType="string">
        DELETE FROM cart WHERE customer_id = #{customerId}
    </delete>

    <!-- Select a cart by customerId -->
    <select id="selectCartByCustomerId" parameterType="string" resultType="com.exam.model.Cart">
        SELECT customer_id AS customerId,
               product_id AS productId,
               product_amount AS productAmount,
               product_price AS productPrice,
               totalcost AS totalCost
        FROM cart
        WHERE customer_id = #{customerId}
    </select>

    <!-- Select all carts -->
    <select id="selectAllCarts" resultType="com.exam.model.Cart">
        SELECT customer_id AS customerId,
               product_id AS productId,
               product_amount AS productAmount,
               product_price AS productPrice,
               totalcost AS totalCost
        FROM cart
    </select>

</mapper>
